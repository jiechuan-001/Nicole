<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=0.8, minimum-scale=0.5, maximum-scale=2.0"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nicole</title>
    <link rel="icon" href="./003.webp" />
    <style>
        html {
            height: 100%;
        }

        body {
            background: radial-gradient(circle farthest-side at center bottom, rgb(27, 2, 21), #05cef2 130%);
            overflow: hidden;
            position: relative;
            height: 100%;
        }

        .shell {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 45vh;
            width: 45vh;
            /* 添加这一行，让鼠标事件穿透该元素 */
            pointer-events: none;
        }

        #box-c {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #box-c img {
            opacity: 1;
        }

        .box {
            filter: grayscale(40%);
            position: absolute;
            margin: auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .box img {
            opacity: 0.4;
            width: 100%;
        }

        /* 爱心 */
        .heart-grid {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1;
            display: grid;
            grid-template-columns: repeat(11, 8vh);
            grid-auto-rows: 8vh;
            gap: 2px;
        }

        .block {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #ffb6c1;
            border-radius: 4px;
            cursor: pointer;
            /* 鼠标悬停时显示为手型 */
            transition: all 0.2s ease;
            /* 添加过渡动画 */
        }

        .block:hover {
            background-color: #ff8c9e;
            /* 鼠标悬停时改变背景颜色 */
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            /* 添加阴影效果 */
        }

        .block:active {
            transform: scale(0.95);
            /* 点击时缩小元素 */
        }

        .block img {
            max-width: 100%;
            max-height: 100%;
        }
    </style>
</head>

<body>
    <div class="heart-grid">
        <!-- 第一行 -->
        <div></div>
        <div></div>
        <div class="block">
            <img src="./01.webp" alt="">
        </div>
        <div class="block">
            <img src="./02.webp" alt="">
        </div>
        <div></div>
        <div></div>
        <div></div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div></div>
        <div></div>

        <!-- 第二行 -->
        <div></div>
        <div class="block">
            <img src="./03.webp" alt="">
        </div>
        <div class="block">
            <img src="./04.webp" alt="">
        </div>
        <div class="block">
            <img src="./05.webp" alt="">
        </div>
        <div class="block">
            <img src="./06.webp" alt="">
        </div>
        <div></div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div></div>

        <!-- 第三行 -->
        <div class="block">
            <img src="./07.webp" alt="">
        </div>
        <div class="block">
            <img src="./08.webp" alt="">
        </div>
        <div class="block">
            <img src="./09.webp" alt="">
        </div>
        <div class="block">
            <img src="./10.webp" alt="">
        </div>
        <div class="block">
            <img src="./11.webp" alt="">
        </div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div class="block random"></div>

        <!-- 第四行 -->
        <div class="block">
            <img src="./12.webp" alt="">
        </div>
        <div class="block">
            <img src="./13.webp" alt="">
        </div>
        <div class="block">
            <img src="./14.webp" alt="">
        </div>
        <div class="block">
            <img src="./15.webp" alt="">
        </div>
        <div class="block">
            <img src="./16.webp" alt="">
        </div>
        <div class="block"></div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div class="block random"></div>

        <!-- 第五行 -->
        <div></div>
        <div class="block">
            <img src="./17.webp" alt="">
        </div>
        <div class="block">
            <img src="./18.webp" alt="">
        </div>
        <div class="block">
            <img src="./19.webp" alt="">
        </div>
        <div class="block">
            <img src="./20.webp" alt="">
        </div>
        <div class="block  random"></div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div></div>

        <!-- 第六行 -->
        <div></div>
        <div></div>
        <div class="block">
            <img src="./21.webp" alt="">
        </div>
        <div class="block">
            <img src="./22.webp" alt="">
        </div>
        <div class="block">
            <img src="./23.webp" alt="">
        </div>
        <div class="block "></div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div></div>
        <div></div>

        <!-- 第七行 -->
        <div></div>
        <div></div>
        <div></div>
        <div class="block">
            <img src="./24.webp" alt="">

        </div>
        <div class="block">
            <img src="./25.webp" alt="">

        </div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div class="block random"></div>
        <div></div>
        <div></div>
        <div></div>

        <!-- 第八行 -->
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div class="block">
            <img src="./26.webp" alt="">

        </div>
        <div class="block "></div>
        <div class="block random"></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>

        <!-- 第九行 -->
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div class="block random"></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
    <div class="shell">
        <div class="box" id="box-a">
            <img src="./10.webp" alt="">
        </div>
        <div class="box" id="box-b">
            <img src="./10.webp" alt="">
        </div>
        <div class="box" id="box-c">
            <img src="./10.webp" alt="">
        </div>
    </div>

    <!-- 导入jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
    <!-- 导入动画库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

    <script>
        /* 获取元素*/
        let $body = $("body"),
            $heroA = $("#box-a img"),
            $heroB = $("#box-b img"),
            $heroC = $("#box-c img");

        // 设置 transformStyle 属性为 'preserve-3d'
        TweenMax.set($heroA, { transformStyle: 'preserve-3d' });
        TweenMax.set($heroB, { transformStyle: 'preserve-3d' });
        TweenMax.set($heroC, { transformStyle: 'preserve-3d' });

        /* 鼠标移动事件 */
        $body.mousemove(function (e) {
            /* 计算鼠标在页面中的位置 */
            let sxPos = e.pageX / $body.width() * 150 - 50;
            let syPos = e.pageY / $body.height() * 150 - 50;
            console.log("x:" + sxPos + ", y:" + syPos);

            /* 使用TweenMax库设置元素的动画效果 */
            TweenMax.to($heroA, 1, {
                rotationY: 0.05 * sxPos, rotationX: 0.20 * syPos,
                rotationZ: '-0.1', transformPerspective: 500,
            });
            TweenMax.to($heroB, 1, {
                rotationY: 0.10 * sxPos,
                rotationX: 0.15 * syPos, rotationZ: 0, transformPerspective: 500,
            });
            TweenMax.to($heroC, 1, {
                rotationY: 0.15 * sxPos,
                rotationX: 0.10 * syPos, rotationZ: 0.10, transformPerspective: 500,
            });
        });

        // 给类名为block的元素添加点击事件
        $(".block").on("click", function () {
            // 检查当前点击的block元素内部是否有img标签
            let img = $(this).find("img");
            if (img.length > 0) {
                // 获取img标签的图片路径
                let imgSrc = img.attr("src");
                // 持久化存储在浏览器的localStorage中
                localStorage.setItem("selectedImage", imgSrc);

                // 定义淡入淡出动画函数
                function fadeAndChangeImage($img) {
                    TweenMax.to($img, 0.5, {
                        opacity: 0,
                        onComplete: function () {
                            $img.attr("src", imgSrc);
                            TweenMax.to($img, 0.5, { opacity: 1 });
                        }
                    });
                }

                // 对shell内部的三个img执行动画
                fadeAndChangeImage($heroA);
                fadeAndChangeImage($heroB);
                fadeAndChangeImage($heroC);
            }
        });

        // 页面加载时，检查localStorage中是否有存储的图片路径
        let storedImage = localStorage.getItem("selectedImage");
        if (storedImage) {
            $heroA.attr("src", storedImage);
            $heroB.attr("src", storedImage);
            $heroC.attr("src", storedImage);
        } else {
            $heroA.attr("src", "./10.webp");
            $heroB.attr("src", "./10.webp");
            $heroC.attr("src", "./10.webp");
        }

        // 生成随机浅色系颜色的函数
        function getRandomLightColor() {
            // 生成 0 - 255 之间的随机数，并且确保数值较大以保证颜色较浅
            let r = Math.floor(Math.random() * 128) + 128;
            let g = Math.floor(Math.random() * 128) + 128;
            let b = Math.floor(Math.random() * 128) + 128;
            return `rgb(${r}, ${g}, ${b})`;
        }

        // 获取包含类名为random的元素
        let $randomBlocks = $(".block.random");
        $randomBlocks.each(function () {
            this.style.backgroundColor = getRandomLightColor();
        });

        // 页面加载完成后触发全屏操作
        window.onload = function () {
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen();
            } else if (document.documentElement.webkitRequestFullscreen) {
                document.documentElement.webkitRequestFullscreen();
            } else if (document.documentElement.mozRequestFullScreen) {
                document.documentElement.mozRequestFullScreen();
            } else if (document.documentElement.msRequestFullscreen) {
                document.documentElement.msRequestFullscreen();
            }
        };
    </script>
</body>

</html>
